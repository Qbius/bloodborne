<html>
<head>

<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/vue@2.6.11"></script>
<script src="https://unpkg.com/bootstrap-vue@latest/dist/bootstrap-vue.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>

<style type="text/css">
    :root {
        --backgroundcolor: #6c757d;
        --middgroundcolor: #444D55;
    }

    #app {
        width: 100%;
        height: 100%;
        background-color: var(--backgroundcolor);
    }

    .info-selection {
        border-radius: 12px;
        background-color: var(--middgroundcolor);
        padding: 5px;
    }

    .damage-tables {
        flex: 1;
        display: flex;
        flex-wrap: wrap;
        justify-content: center;
        align-items: center;
    }

    .damage-table {
        border-radius: 3px;
        border: 1px solid var(--middgroundcolor);
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        padding: 1px;
    }

    .weapon-image {
        width: 64px;
        height: 64px;
        margin: 1px;
        border: 1px solid #262F37;
    }

    .attr-image {
        width: 15px;
        height: 15px;
    }

    .weapon-image:hover {
        opacity: 0.6;
    }

    .item-container {
        display: flex;
        justify-content: center;
    }

    .item {
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        margin: auto;
        padding: 1px;
        padding-left: 2px;
        padding-right: 2px;
        width: 28px;
        user-select: none;  
    }

    .item-header {
        border-radius: 3px;
        background-color: var(--middgroundcolor);
        color: #dee2e6;
        margin: 1px;
    }

    .item-value {
        background-color: #262F37;
        border-radius: 3px;   
    }

    .item-text {
        display: flex;
        justify-content: center;
        font-size: 10px;
    }

    .selected-image {
        border-color: #dee2e6;
    }

    .hovered {
        background-color: #dee2e6;
        color: var(--middgroundcolor);
    }

    .highest {
        background-color: black;
    }

</style>

</head>
<body>
<div id="app">

    <div style="display: flex; flex-direction: column; align-items: center; justify-content: space-between; padding-top: 10px; padding-bottom: 10px; height: 100%">
        <div class="info-selection">
            <div style="display: flex; justify-content: center; flex-wrap: wrap;">
                <img v-for="([name, info]) in Object.entries(weapons)" class="weapon-image" :class="(name == chosen_weapon) ? 'selected-image' : ''" :style="(name == chosen_weapon) ? 'filter: contrast(150%);' : ''" :title="name" :src="`icons/${name.toLowerCase().replace(/ /g, '_').replace(/'/g, '')}.png`" @click="chosen_weapon = name">
            </div>
        </div>
        <div class="damage-tables">
            <div class="damage-table" v-if="damage_types.physical">
                <div style="display: flex; justify-content: center;" @mouseleave="hovered = [0, 0]">
                    <div class="column"> 
                        <div class="item-container">
                            <div class="item item-header" :style="(show_percentages ? 'background-color: #99CCFF;' : 'background-color: gray;')" @click="show_percentages = !show_percentages">
                                <span class="item-text">%</span>
                            </div>
                        </div>
                        <div v-for="i in fullrange" v-if="within_skill_bounds(i)" class="item-container">
                            <div class="item item-header" :class="(hovered[1] == i) ? 'hovered' : ''">
                                <img v-if="i == selected[1]" class="attr-image" src="icons/skill.jpg">
                                <span v-else class="item-text">{{ i }}</span>
                            </div>
                        </div>
                    </div>
                    <div v-for="x in fullrange" v-if="within_strength_bounds(x)" class="column">
                        <div class="item-container">
                            <div class="item item-header" :class="(hovered[0] == x) ? 'hovered' : ''">
                                <img v-if="x == selected[0]" class="attr-image" src="icons/strength.jpg">
                                <span v-else class="item-text">{{ x }}</span>
                            </div>
                        </div>
                        <div v-for="y in fullrange" v-if="within_bounds(x, y)" class="item-container" @click="selected = [x, y]" @mouseenter="hovered = [x, y]" @mouseleave="hovered = [0, 0]">
                            <div class="item item-value" :style="'background-color: ' + physical_colors[x][y] + ';' + (is_highest_in_diagonal(x, y) ? 'background-color: black; color: #dee2e6;' : '') + ((hovered[0] == x && hovered[1] == y) ? 'border: solid 1px #dee2e6;' : 'margin: 1px;') + ((selected[0] == x && selected[1] == y) ? 'background-color: #dee2e6; color: var(--middgroundcolor);' : '')">
                                <span v-show="show_percentages" class="item-text">{{ Math.floor(physical_percentages[x][y] * 100) }}%</span>
                                <span v-show="!show_percentages" class="item-text">{{ Math.floor(physical[x][y]) }}</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
        
    <script src="index.js"></script>
        
</div>
</body>
</html>